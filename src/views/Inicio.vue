<template>
  <div style="background:black;">
    <!-- MAS VISTOS -->
    <v-row class="mt-16">
      <v-col
        cols="12"
        md="6"
        xs="12"
        class="margin-0-padding-0"
        style="display:flex; justify-content:center; vertical-align:middle;"
      >
        <v-hover v-slot:default="{ hover }">
          <v-card
            color="grey lighten-4"
            width="100%"
            height="max-content"
            class="margin-0-padding-0"
          >
            <v-img :aspect-ratio="16/9" src="images/farfan.jpg">
              <v-expand-transition>
                <div
                  v-if="hover"
                  class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                  style="height: 100%;"
                >
                  <p
                    style="text-align: center; font-size: 2rem"
                  >Farfán - La Foquita El 10 de la calle</p>
                </div>
              </v-expand-transition>
            </v-img>
          </v-card>
        </v-hover>
      </v-col>
      <v-col cols="12" md="6" xs="12" style="margin:0; padding-top:0;">
        <v-row>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
        </v-row>
        <v-row>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
        </v-row>
        <v-row>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
          <v-col cols="12" md="4" xs="12" class="margin-0-padding-0">
            <v-hover v-slot:default="{ hover }">
              <v-card color="grey lighten-4" width="100%" class="margin-0-padding-0">
                <v-img :aspect-ratio="16/9" src="images/farfan.jpg" class="margin-0-padding-0">
                  <v-expand-transition>
                    <div
                      v-if="hover"
                      class="d-flex transition-fast-in-fast-out blue-grey lighten-4 darken-2 v-card--reveal display-3 white--text"
                      style="height: 100%;"
                    >
                      <p
                        style="text-align: center; font-size: 1rem"
                      >Farfán - La Foquita El 10 de la calle</p>
                    </div>
                  </v-expand-transition>
                </v-img>
              </v-card>
            </v-hover>
          </v-col>
        </v-row>
      </v-col>
    </v-row>
    {{get_select}}
    {{get_text}}
    <!-- MAS VISTOS -->
    <!-- ===========================================  -->
    <div v-if="mostrar_buscador==false">
      <CarouselContenido :data="arrayContenido.peliculas" :nombre="'Películas'" />
      <CarouselContenido :data="arrayContenido.serie" :nombre="'Series'" />
      <CarouselContenido :data="arrayContenido.canal" :nombre="'Canales en vivo'" />
    </div>
    <div v-if="mostrar_buscador">
      <CarouselContenido :data="contenido_busqueda" :nombre="''" />
    </div>
  </div>
</template>
<script>
import CarouselContenido from "../components/CarouselContenido.vue";
export default {
  components: {
    CarouselContenido,
  },
  name: "Home",
  data() {
    return {
      model: null,
      mostrar_buscador:false,
      arrayContenido: {
        peliculas: [],
        serie: [],
        canal: [],
      },
      contenido_busqueda:{}
    };
  },
  computed: {
    currentUser() {
      return this.$store.state.auth.user;
    },
    get_select(){
      let vue = this;
      let buscador_select= this.$store.state.buscador_select;
      return ;
    },
    get_text(){
      let vue=this;
      let buscador_text=this.$store.state.buscador_text;
      vue.axios.get('http://localhost:49220/api/Consumo/busquedapornombre/?nombre='+buscador_text).then(function(response){
        vue.contenido_busqueda=response.data;
        let cantidad = vue.contenido_busqueda.length;
        (cantidad == 1) ? vue.mostrar_buscador=true : vue.mostrar_buscador=false;
        console.log(cantidad)
      });
      return buscador_text;
    }
  },
  mounted() {
    if (!this.currentUser) {
      if (this.$route.name !== "Inicio") {
        this.$router.push("/");
      }
    }
  },
  created() {
    this.listarContenido();
  },
  methods: {
    listarContenido() {
      let vue = this;
      vue.axios
        .get("http://localhost:49220/api/publicacion/listarcontenido")
        .then((response) => {
          // console.log(response.data.peliculas[0]);
          vue.arrayContenido.peliculas = response.data.peliculas;
          vue.arrayContenido.serie = response.data.serie;
          vue.arrayContenido.canal = response.data.canal;
        })
        .catch((error) => {
          console.log(error);
        });
    },
  },
};
</script>
